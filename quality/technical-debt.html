<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Reducing Technical Debt | CroudTech Development</title>
    <meta name="description" content="Croud developer standards documentation">
    
    
    <link rel="preload" href="/Croud-Standards/assets/css/0.styles.1e2ca596.css" as="style"><link rel="preload" href="/Croud-Standards/assets/js/app.1f93e9c4.js" as="script"><link rel="preload" href="/Croud-Standards/assets/js/2.d995c03c.js" as="script"><link rel="preload" href="/Croud-Standards/assets/js/13.d2f0c10e.js" as="script"><link rel="prefetch" href="/Croud-Standards/assets/js/10.e3cc811a.js"><link rel="prefetch" href="/Croud-Standards/assets/js/11.54c3f5e9.js"><link rel="prefetch" href="/Croud-Standards/assets/js/12.c0a76ea9.js"><link rel="prefetch" href="/Croud-Standards/assets/js/14.9e339ad8.js"><link rel="prefetch" href="/Croud-Standards/assets/js/15.2389453f.js"><link rel="prefetch" href="/Croud-Standards/assets/js/16.39994558.js"><link rel="prefetch" href="/Croud-Standards/assets/js/3.c4c78cfb.js"><link rel="prefetch" href="/Croud-Standards/assets/js/4.b72503fc.js"><link rel="prefetch" href="/Croud-Standards/assets/js/5.aa527b7f.js"><link rel="prefetch" href="/Croud-Standards/assets/js/6.3490551e.js"><link rel="prefetch" href="/Croud-Standards/assets/js/7.7c1e7ee8.js"><link rel="prefetch" href="/Croud-Standards/assets/js/8.f351c9e8.js"><link rel="prefetch" href="/Croud-Standards/assets/js/9.5b5c6d27.js">
    <link rel="stylesheet" href="/Croud-Standards/assets/css/0.styles.1e2ca596.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Croud-Standards/" class="home-link router-link-active"><!----> <span class="site-name">CroudTech Development</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Home</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Development</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Quality</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Croud-Standards/quality/repo-naming.html" class="sidebar-link">Git Repositories</a></li><li><a href="/Croud-Standards/quality/coding-standards.html" class="sidebar-link">Coding Standards</a></li><li><a href="/Croud-Standards/quality/technical-debt.html" class="active sidebar-link">Reducing Technical Debt</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Croud-Standards/quality/technical-debt.html#code-duplication" class="sidebar-link">Code Duplication</a></li></ul></li><li><a href="/Croud-Standards/quality/release-process.html" class="sidebar-link">Release Process</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deployment</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="reducing-technical-debt"><a href="#reducing-technical-debt" aria-hidden="true" class="header-anchor">#</a> Reducing Technical Debt</h1> <h2 id="code-duplication"><a href="#code-duplication" aria-hidden="true" class="header-anchor">#</a> Code Duplication</h2> <p>Duplicating code can not only be inefficient but can also be dangerous to developers not familiar with the codebase. By centralising shared logic, we make future changes easier with less risk.</p> <h3 id="abstraction"><a href="#abstraction" aria-hidden="true" class="header-anchor">#</a> Abstraction</h3> <p>Consider the following array sort example that shares the same sort algorithm</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> orderedUsers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span>name <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>name
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> orderedTeams <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>teams<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span>name <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>name
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>We can abstract this algorithm into a reusable and testable sort function.
Note that we are passing through <code>sortByName</code> and not <code>sortByName()</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sortByName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>name <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>name

<span class="token keyword">const</span> orderedUsers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortByName<span class="token punctuation">)</span>
<span class="token keyword">const</span> orderedTeams <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>teams<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortByName<span class="token punctuation">)</span>
</code></pre></div><h3 id="factory-methods"><a href="#factory-methods" aria-hidden="true" class="header-anchor">#</a> Factory Methods</h3> <p>Sometimes when we are abstracting code, we may start to notice patterns. For example, sorting objects by a certain key is a fairly common use case. We can abstract your original <a href="#abstraction">Abstraction</a> into a <strong>Factory Method</strong> that will build a sort algorithm for us based on the arguments that we pass in.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sortByKey</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&gt;</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token function">sortByKey</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// effectively (a, b) =&gt; a.name &gt; b.name</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token function">sortByKey</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// effectively (a, b) =&gt; a.id &gt; b.id</span>
</code></pre></div><h3 id="mixins"><a href="#mixins" aria-hidden="true" class="header-anchor">#</a> Mixins</h3> <p>Code duplication can also be addressed across multiple files, we can abstract logic into common libraries, such as <a href="https://vuejs.org/v2/guide/mixins.html" target="_blank" rel="noopener noreferrer">Mixins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, that can be shared between files</p> <p>Consider these similar methods in two seperate Vue components</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Foo.vue</span>
<span class="token function">adminUserIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> adminUsers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>admin<span class="token punctuation">)</span>
    <span class="token keyword">return</span> adminUsers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Bar.vue</span>
<span class="token function">adminUserNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> adminUsers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>admin<span class="token punctuation">)</span>
    <span class="token keyword">return</span> adminUsers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The duplicated logic to return a list of admin users can be abstracted to a <strong>Computed Property</strong> in a <strong>Mixin</strong> which can be included in both Vue components.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// userMixin.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">adminUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>admin<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can then import this <strong>Mixin</strong> into both components and remove the duplicated code in the method</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Foo.vue</span>
<span class="token keyword">import</span> userMixin <span class="token keyword">from</span> <span class="token string">'./userMixin'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    mixins<span class="token punctuation">:</span> <span class="token punctuation">[</span> userMixin <span class="token punctuation">]</span><span class="token punctuation">,</span>

    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span> 
        <span class="token function">adminUserIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>adminUsers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="utility-libraries"><a href="#utility-libraries" aria-hidden="true" class="header-anchor">#</a> Utility Libraries</h3> <p>As <strong>Mixins</strong> only really apply to similar Vue components, we can also abstract our reusable variables and methods into utility libraries.</p> <p>Consider the following code that filters a list of users based on an array of ID's</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p>First of all, without the domain knowledge of what these ID's are for, it is hard to understand the intent of this code. We can help by moving the array to a sensibly named variable.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> adminUserIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> adminUserIds<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p>As it is likely that we will reuse this variable and filter method again, we should move it to a utility library and expose them using the <code>export</code> keyword</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// userUtils.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> adminUserIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">adminUsersFilter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> adminUserIds<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre></div><p>We can then selectively import these into our project by utilising <a href="https://webpack.js.org/guides/tree-shaking/" target="_blank" rel="noopener noreferrer">Webpack's Tree Shaking<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> adminUsersFilter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./userUtils.js'</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>adminUsersFilter<span class="token punctuation">)</span> 
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Croud-Standards/quality/coding-standards.html" class="prev">Coding Standards</a></span> <span class="next"><a href="/Croud-Standards/quality/release-process.html">Release Process</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Croud-Standards/assets/js/app.1f93e9c4.js" defer></script><script src="/Croud-Standards/assets/js/2.d995c03c.js" defer></script><script src="/Croud-Standards/assets/js/13.d2f0c10e.js" defer></script>
  </body>
</html>
